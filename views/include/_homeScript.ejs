<script>
  const editButtons = document.querySelectorAll(".editButton");
  const deleteButtons = document.querySelectorAll(".deleteButton");

  editButtons.forEach((editButton) => {
    editButton.addEventListener("click", (e) => {
      e.preventDefault();
      let parent = e.target.parentNode;
      const id = parent.getAttribute("data-id");
      window.location.href = `/updateProduct/${id}`;
    });
  });

  deleteButtons.forEach((deleteButton) => {
    deleteButton.addEventListener("click", (e) => {
      e.preventDefault();
      console.log("delete");
      let parent = e.target.parentNode;
      const id = parent.getAttribute("data-id");

      if (!confirm(`Do you want to Delete this product?`)) {
        return;
      }

      fetch(`http://localhost:3000/api/products/${id}`, {
        method: "DELETE",
      }).then((res) => {
        console.log("Product Deleted Succesfully");
        alert("Product is Deleted Succesfully");
        window.location.reload();
      });
    });
  });
</script>
